@page "/"

<div class="row">
    <div class="col-4">
        <AddMemory @ref="newmemory" OnAddAlbum="AddAlbum" ></AddMemory>
    </div>
    <div class="col-8">
        <div class="row">
            @foreach(var album in Albums){
                <ShowMemory MyMemory="album" OnEditAlbum="EditAlbum" OnDeleteAlbum="DeleteAlbum"></ShowMemory>
            }

        </div>
        
    </div>
</div>

@code{
    @* private bool Editing= false; *@
    public List<Memory> Albums= new List<Memory>(){
        new Memory(){
            Id=1,
            Name="Highschool memory",
            Description="My high school journey",
            Created=DateTime.Now,
            Location="My PC"
        },
         new Memory(){
            Id=2,
            Name="Roadtrip",
            Description="My roadtrip adventure",
            Created=DateTime.Now,
            Location="Hard drive"
        },
         new Memory(){
            Id=3,
            Name="Cohort training",
            Description="My cohort training experience",
            Created=DateTime.Now,
            Location="Flash drive"
        },
         new Memory(){
            Id=4,
            Name="Campus life",
            Description="My life in campus",
            Created=DateTime.Now,
            Location="My PC"
        }
    };
    public void AddAlbum(Memory newMemory){
        var memory = Albums.Find(x => x.Id == newMemory.Id);

        if (memory == null) 
        {
            newMemory.Id=Albums.Count +1;
            Albums.Add(newMemory);
           
        }
        else {
            memory.Name = newMemory.Name;
            memory.Description = newMemory.Description;
            memory.Created = newMemory.Created;
            memory.Location = newMemory.Location;
        }
        newmemory.ClearInputs(); 

    }
    public AddMemory newmemory;

    public void EditAlbum(Memory UpdateMemory){  
        newmemory.EditAlbum(UpdateMemory);       
    }

      public void DeleteAlbum(Memory UpdatedMemory){
        var album= Albums.Find(a=>a.Id== UpdatedMemory.Id);
        if(album!=null){
            Albums.Remove(album);

        }
    }
    


   

}
